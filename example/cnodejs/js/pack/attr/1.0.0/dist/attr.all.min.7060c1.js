(function(){define("attr/linkToBlank",["jquery","mcore"],function(t,e){"use strict";var n;return n=window.location.origin,e.Template.regAttr("link-to-blank",e.Template.Attr.subclass({constructor:e.Template.Attr.prototype.constructor,init:function(){return this.$el.on("click","a",function(){var t,e;return t=String(this.href),-1!==t.indexOf("cnodejs.org/topic/")?(e=t.split("cnodejs.org/topic/").pop(),window.location.href="#/topic/"+e,!1):0!==t.indexOf(n)?(window.open(t),!1):void 0})}}))})}).call(this),function(){define("attr/userLink",["jquery","mcore","cnode/formatters"],function(t,e,n){"use strict";return e.Template.regAttr("user-link",e.Template.Attr.subclass({constructor:e.Template.Attr.prototype.constructor,init:function(){return this.ix=this.$el.attr("data-ix"),this.$el.on("click","a",function(){var e;return e=String(t(this).attr("href")),0===e.indexOf("/user/")?(window.location.href="#"+e,!1):void 0})},update:function(e){var r;return this.replies=JSON.parse(JSON.stringify(e)),r=this,this.$el.find("a").each(function(){var i,o,c,s,a,u;return i=t(this),a=i.text(),c=i.attr("href"),0===a.indexOf("@")&&0===c.indexOf("/user/")?(u=a.replace("@",""),e=r.replies.slice(0,r.ix),e.reverse(),s="",t.each(e,function(t,e){return e.author.loginname===u?(s=e,!1):void 0}),s?(o=t("<blockquote>\n    "+n.markdown(s.content)+"\n</blockquote>"),o.insertBefore(i)):void 0):void 0})}}))})}.call(this),function(){define("attr",["attr/linkToBlank"],function(){"use strict"})}.call(this);